{% extends "base.html" %}

{% block title %}Maps for collection{% endblock %}

{% block head %}
	{{ super() }}
{% endblock %}

{% block content %}

	<!-- <h1 align="center">Maps</h1> -->
	<h3 align="center" style="background: #DDDDDD"> {{maps.dataset_id}}</h3>

	<div class="row">
		<div class="col-sm-6" id="kv-maps">
			<div class="row" id="kv-maps-box">
				<div class="div-inline"><h3>Science Keyword Map</h3></div>

				<a href="/_edit_keyword_map/{{ maps.unique_name }}" class="btn btn-info active" role="button">EDIT</a>
				<br><br>
				<div class="div-list-group" style="height:600px;overflow-y:scroll;border: 0.5px solid; border-radius: 10px; margin:0 5px 0 0;" name="div-test">
				{% for k, vs in sorted_maps['kv'].iteritems() %}

					{% set outerLoopIndex = loop.index %}
					<ul class="list-group" id="kvk-{{outerLoopIndex}}" style="background:#E6E6FA;">
						<div class="list-group-each-keyword">
							<!-- {{k}} -->
						{% set keyword_part_list = k.split('->') %}
						{% for keyword_part in keyword_part_list %}
							{% if loop.first %}
								<div class="keyword-inline-first">{{keyword_part}}<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></div>
							{% elif loop.last %}
								<div class="keyword-inline-last">{{keyword_part}}</div>
							{% else %}
								<div class="keyword-inline">{{keyword_part}}<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></div>
							{% endif %}
						{% endfor %}
						<span class="badge">{{vs['mapped']|length}}</span>
						</div>

						<!-- <h5 >{{k}} <span class="badge">{{vs['mapped']|length}}</span></h5> -->
						{% for v, i in vs['mapped'] %}
							<li class="list-group-item" id="kvk-innerlist-{{outerLoopIndex}}-{{loop.index}}">
								{{ v }} : {{ i }}
							</li>
						{% endfor %}
					</ul>
				{% endfor %}
				</div>



			</div>
		</div>

		<div class="col-sm-6" id="vk-maps">
			<div class="row" id="kv-maps-box">
				<div class="div-inline"><h3>Parameter Map</h3></div>

				<a href="/_edit_variable_map/{{ maps.unique_name }}" class="btn btn-info " role="button"> EDIT</a>

				<div style="display: inline; background-color:#F99; width: 100%; height: 40px; border:thin solid black;">
				<!-- <div class="div-inline"> -->
				<b><span> <img alt="Key" src="{{ url_for('static', filename='img/icons/key-1.png') }}"" style="width:35px;height:35px;"">: gcmd_key  </span> </b>
				&nbsp; &nbsp; &nbsp;
				<b><span> <img alt="Key" src="{{ url_for('static', filename='img/icons/unit-4.png') }}"" style="width:25px;height:25px;""> : units </span></b>
				</div>
				<br><br>
				<div class="div-list-group" style="height:600px;overflow-y:scroll;border: 0.5px solid; border-radius: 10px;" name="div-test">
				{% for v, ks in sorted_maps['vk'].iteritems() %}

					{% set outerLoopIndex = loop.index %}
					<!-- <ul class="list-group" id="vkv-{{outerLoopIndex}}" style="background: #E6E6FA;"> -->
					<ul class="list-group" id="vkv-{{outerLoopIndex}}" style="background: #EEEEEE;">
						<div class="keyword-inline-variable">{{v}}</div>  <span class="badge">{{ks['mapped']|length}}</span>
						{% if 'ways' in maps %}
							{% if maps.ways[v] == 1 %}
								<!-- <span class="glyphicon glyphicon-tags" aria-hidden="true"></span> -->
								<img alt="Key" src="{{ url_for('static', filename='img/icons/key-1.png') }}"" style="width:25px;height:25px;"">

							{% elif maps.ways[v] == 2 %}
								<!-- <span class="glyphicon glyphicon-flag" aria-hidden="true"></span> -->
								<img alt="Key" src="{{ url_for('static', filename='img/icons/unit-4.png') }}"" style="width:25px;height:25px;"">
							{% endif %}
						{% endif %}
						{% for k, i in ks['mapped'] %}
							<li class="list-group-item" id="vkv-innerlist-{{outerLoopIndex}}-{{loop.index}}">
								{{ k }} : {{ i }}
							</li>
						{% endfor %}
					</ul>
				{% endfor %}
				</div>



			</div>
		</div>

	</div>





{% endblock %}